<!DOCTYPE html>
<html>
<head>
    <title>Mini Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
  body.dark-mode {
    background-color: #121212;
    color: #e0e0e0;
  }

  .dark-mode .card {
    background-color: #1e1e1e;
    color: #ffffff;
  }

  .dark-mode .navbar {
    background-color: #000 !important;
  }

  .dark-mode .form-control {
    background-color: #2c2c2c;
    color: #fff;
    border-color: #444;
  }

  .dark-mode a {
    color: #9ecbff;
  }
</style>

 </head>
<body id="site-body">

<nav class="navbar navbar-dark bg-dark">
  <div class="container d-flex justify-content-between">
    <a class="navbar-brand" href="/">Mini Blog</a>
    <div>
       {% if user.is_authenticated %}
           <span class="text-light me-2">Hi, {{ user.username }}</span>
           <form method="post" action="{% url 'logout' %}" class="d-inline">
           {% csrf_token %}
            <button type="submit" class="btn btn-outline-light btn-sm me-2">Logout</button>
              </form>
           <a href="{% url 'create_post' %}" class="btn btn-warning btn-sm">+ New Post</a>
       {% else %}
           <a href="{% url 'login' %}" class="btn btn-outline-light btn-sm">Login</a>
       {% endif %}
          <button id="theme-toggle" class="btn btn-outline-light btn-sm ms-2">üåô Dark</button>
   </div>
  </div>
</nav>

<div class="container py-4 px-3 px-md-5">

  <div class="container mt-3">
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {% endfor %}
  {% endif %}
</div>


    {% block content %}{% endblock %}
</div>


<script>
  const toggleBtn = document.getElementById("theme-toggle");
  const body = document.getElementById("site-body");

  // Load saved theme
  if (localStorage.getItem("theme") === "dark") {
    body.classList.add("dark-mode");
    toggleBtn.innerText = "‚òÄÔ∏è Light";
  }

  toggleBtn.addEventListener("click", () => {
    body.classList.toggle("dark-mode");

    if (body.classList.contains("dark-mode")) {
      localStorage.setItem("theme", "dark");
      toggleBtn.innerText = "‚òÄÔ∏è Light";
    } else {
      localStorage.setItem("theme", "light");
      toggleBtn.innerText = "üåô Dark";
    }
  });
</script>

</body>
</html>